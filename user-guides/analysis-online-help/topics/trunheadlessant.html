<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta name="DC.Type" content="task" />
<meta name="DC.Title" content="Running a code review as an Ant task" />
<meta name="abstract" content="You can run a code review when you build an Eclipse plug-in in the plug-in development environment (PDE) by adding an Apache Ant task to the plug-in's build.xml file." />
<meta name="description" content="You can run a code review when you build an Eclipse plug-in in the plug-in development environment (PDE) by adding an Apache Ant task to the plug-in's build.xml file." />
<meta name="DC.subject" content="code review, Ant task, running, plug-in development" />
<meta name="keywords" content="code review, Ant task, running, plug-in development" />
<meta name="DC.Relation" scheme="URI" content="../topics/tperfcodereview.html" />
<meta name="DC.Relation" scheme="URI" content="../topics/ccodereview.html" />
<meta name="DC.Relation" scheme="URI" content="../topics/canttask.html" />
<meta name="DC.Relation" scheme="URI" content="../topics/ccoderevcatsrules.html" />
<meta name="copyright" content="(C) Copyright IBM Corporation 2004 2007" />
<meta name="DC.Rights.Owner" content="(C) Copyright IBM Corporation 2004 2007" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="t_runheadlessant" />
<meta name="DC.Language" content="en-us" />
<!-- All rights reserved. Licensed Materials Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="../ibmdita.css" />
<link rel="stylesheet" type="text/css" href="../swg_info_common.css" />
<link rel="Start" href="../topics/tperfcodereview.html" />
<title>Running a code review as an Ant task</title>
</head>
<body id="t_runheadlessant"><a name="t_runheadlessant"><!-- --></a>
<h1 class="topictitle1">Running a code review as an Ant task</h1>
<div><p>You can run a code review when you build an Eclipse plug-in in
the plug-in development environment (PDE) by adding an Apache Ant task to
the plug-in's <span class="filepath">build.xml</span> file.</p>
<div class="p">To run a code review from the command line, you must create a rules
file.</div>
<div class="section">The analysis.analyze Ant task provides a convenient method to run
a code review as part of a complete build process for plug-ins you develop
in the PDE. You can configure the PDE project builder to run the Ant task
whenever you build the project and whenever you clean the project and rebuild
from scratch.<p>To run a code review as an Ant task:</p>
</div>
<ol><li class="stepexpand"><span>Verify that the analysis.analyze Ant task is registered.</span><ol type="a"><li><span>Click <span class="menucascade"><span class="uicontrol">Window</span> &gt; <span class="uicontrol">Preferences</span></span></span></li>
<li><span>In the <span class="wintitle">Preferences</span> window, click <span class="uicontrol">Ant</span>,
then click <span class="uicontrol">Runtime</span>.</span></li>
<li><span>In the <span class="wintitle">Runtime</span> pane, click the <span class="uicontrol">Tasks</span> tab
and verify that the analysis.analyze Ant task is listed in the Name column.</span></li>
</ol>
</li>
<li class="stepexpand"><span>If the plug-in project does not have an Ant build file, in the <span class="wintitle">Package
Explorer</span> view, right-click the project name; then click <span class="menucascade"><span class="uicontrol">PDE Tools</span> &gt; <span class="uicontrol">Create Ant build file</span></span></span></li>
<li class="stepexpand"><span>Open the build.xml file and add the following Ant target:</span> <pre>&lt;target name="code review"&gt;
  &lt;analysis.analyze projects="project name"
                    rulefile="path to rules file" /&gt;
&lt;/target&gt;</pre>
</li>
<li class="stepexpand"><span>Test the target: in the Outline view, right-click the target name
(for example, code review); then click <span class="menucascade"><span class="uicontrol">Run as</span> &gt; <span class="uicontrol">Ant Build</span></span>.</span> The <span class="wintitle">Console</span> view
displays the results of the code review.</li>
<li class="stepexpand"><span>Create a builder for the Ant task.</span><ol type="a"><li><span>In the package Explorer view, cick the PDE project; then click <span class="menucascade"><span class="uicontrol">Projects</span> &gt; <span class="uicontrol">Properties</span></span></span></li>
<li><span>In the <span class="wintitle">Properties</span> window, in the left pane,
click <span class="uicontrol">Builders</span>; then click <span class="uicontrol">New</span>.</span></li>
<li><span>In the <span class="wintitle">Choose configuration type</span> window,
click <span class="uicontrol">Ant build</span>; then click <span class="uicontrol">OK</span></span></li>
<li><span>In the <span class="wintitle">Properties for new builder</span> window,
on the <span class="wintitle">Main</span> page, click <span class="uicontrol">Browse Workspace</span></span></li>
<li><span>In the <span class="wintitle">Choose Location</span> window, click the
name of a PDE project; then click build.xml, and click <span class="uicontrol">OK</span>.</span></li>
<li id="t_runheadlessant__substeptarget"><a name="t_runheadlessant__substeptarget"><!-- --></a><span>On the <span class="wintitle">Targets</span> page,
for the After a "Clean" setting, click <span class="uicontrol">Set Targets</span>.</span></li>
<li id="t_runheadlessant__substepjars"><a name="t_runheadlessant__substepjars"><!-- --></a><span>In the <span class="wintitle">Set Targets</span> window,
clear the <span class="uicontrol">build.jars</span> setting</span></li>
<li><span>Repeat substep <a href="#t_runheadlessant__substeptarget">5.f</a> and
substep <a href="#t_runheadlessant__substepjars">5.g</a> for the Manual
builds setting.</span></li>
<li><span>In the Properties for new builder window, type a name for the
builder (for example, code review), and click <span class="uicontrol">OK</span>.</span></li>
</ol>
</li>
<li class="stepexpand"><span>In the PDE perspective, click <span class="menucascade"><span class="uicontrol">Project</span> &gt; <span class="uicontrol">Build Project</span></span>.</span></li>
</ol>
<div class="section">The results of the code review display in the <span class="wintitle">Console</span> view.</div>
<div class="section"></div>
</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="../topics/tperfcodereview.html" title="In IBM Rational products, an automated static analysis code review lets you examine source code at any time during the development life cycle of an application. A code review ensures that the code complies with recognized coding standards, finds unwanted dependencies, and ensures that code development follows the intended structural design.">Performing an automated code review</a></div>
</div>
<div class="relconcepts"><strong>Related concepts</strong><br />
<div><a href="../topics/ccodereview.html" title="A static analysis code review compares the source code of an application with a set of coding standards to ensure that the source code complies with those standards, to find unwanted dependencies, and to ensure that the intended structural design of the code is maintained.">Code reviews</a></div>
<div><a href="../topics/canttask.html" title="If you use the Apache Ant build tool to build plug-ins in the Eclipse plug-in development environment (PDE), you can include code reviews in your build process.">Ant task code review</a></div>
<div><a href="../topics/ccoderevcatsrules.html" title="Rules are the smallest building blocks of a static analysis configuration. Each analysis configuration applies different rules, or sets of rules, that define the conditions that generate results and that assess the quality of your resources. A rule category is a collection of analysis rules, or other categories, that focus on a particular aspect of standards compliance.">Rules and rule categories</a></div>
</div>
</div></body>
</html>